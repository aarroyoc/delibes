Hace ya algún tiempo que la ley europea en materia de privacidad se ha venido aplicando en <a href="https://www.cia.gov/library/publications/the-world-factbook/geos/sp.html">España</a>. La ley define que no se pueden almacenar datos que identifiquen al usuario con fines estadísticos (o publicitarios) a menos que se pida un consentimiento al usuario y este lo acepte. Solo lo deben cumplir aquellas personas que tengan un beneficio económico con la web. En empresas hay que aplicarlo siempre. El almacenamiento más usado para este tipo de identifición han sido las cookies, de ahí el nombre popular de <strong>"ley de cookies"</strong>.<br><br><img class="alignnone size-full wp-image-125" src="https://files.adrianistan.eu/UnionEuropea.jpg" alt="UnionEuropea" width="620" height="387" /><br><h2 id="odiseaentrelascookies">Odisea entre las cookies</h2><br>Yo uso cookies. Las uso en este blog y en otros sitios. <a href="https://www.google.com/analytics">Google Analytics</a> requiere consentimiento, <a href="https://disqus.com/">Disqus</a> requiere consentimiento, <a href="https://www.google.com/adsense">Google AdSense</a> requiere consentimiento. <strong>Los widgets sociales</strong> de Twitter, Facebook, Google+, etc requieren consentimiento.<br><blockquote><em>¿Pero entonces todas las cookies necesitan consentimiento?</em></blockquote><br>No. Sólo las que identifican al usuario con fines estadísticos, que en el caso de los gigantes de Internet es siempre. Si usamos nuestras propias cookies y no las conservamos para posterior análisis no haría falta y no hay que pedir consentimiento.<br><br><img class="alignnone size-full wp-image-23" src="https://files.adrianistan.eu/Cookies.jpg" alt="Cookies" width="419" height="245" /><br><blockquote><em>Cookies son las más usadas, pero si usas WebStorage (localStorage) o almacenamiento de Flash también tendrás que cumplir</em></blockquote><br><h2 id="eurocookiejsalrescate">eurocookie-js al rescate</h2><br>Basado en un pequeño plugin hecho por Google bajo licencia Apache 2.0. Se trata de un pequeño fichero JavaScript que al cargarse pedirá el consentimiento (si no ha sido preguntado antes). Este consentimiento es <strong>molesto</strong>, forzando al usuario a aceptar si quiere leer cómodamente la web. Una vez acepta el consentimiento se carga todo el JavaScript que necesitaba consentimiento. Esto último es algo que <strong>muchos plugins de consentimiento de cookies no hacen</strong>. Realmente no sé si simplemente avisando se cumple la ley, bajo mi interpretación <strong>no</strong>. Y por eso este plugin. Además eurocookie-js está traducido a una gran cantidad de idiomas de la Unión Europea (tomadas directamente de las traducciones oficiales de Google para webmasters sobre esta ley). Vamos a ver como se usa.<br><h2 id="instalandoeurocookiejs">Instalando eurocookie-js</h2><br>Instalar eurocookie-js es más simple que el mecanismo de un botijo. Hay 3 maneras:<br><ul><br> 	<li>npm - <code>npm install eurocookie-js --save</code>, pensado para usarlo con browserify</li><br> 	<li>bower - <code>bower install eurocookie-js --save</code></li><br> 	<li>directamente - descarga el archivo <code>index.js</code> de GitHub: <a href="http://github.com/AdrianArroyoCalle/eurocookie-js">http://github.com/AdrianArroyoCalle/eurocookie-js</a></li><br></ul><br><img class="alignnone size-full wp-image-15" src="https://files.adrianistan.eu/Biscuit.jpg" alt="Biscuit" width="236" height="397" /><br><h2 id="usandoeurocookiejs">Usando eurocookie-js</h2><br><h3 id="identificarjavascriptquenecesitaconsentimiento">Identificar JavaScript que necesita consentimiento</h3><br>Primero, necesitamos identificar que JavaScript necesita consentimiento. Si usa una etiqueta <code>script</code> es fácil. Es importante declarar el tipo MIME del script como texto plano y le añadimos la clase cookie.<br><br><pre class="lang:default decode:true"><br><br>&lt;script class=&quot;cookie&quot; type=&quot;text/plain&quot;&gt;<br> // USEMOS COOKIES FELIZMENTE, ENVIEMOS DATOS A LA NSA <br>&lt;/script&gt;<br></pre><br><br>En muchos casos bastará, por ejemplo con Disqus o con Google Analytics, puesto que cargan asíncronamente los archivos. En otros casos donde usemos el atributo <code>src</code> de <code>script</code> tendremos que modificar el código que se nos provee por el siguiente.<br><br><pre class="lang:default decode:true"><br><br>&lt;script src=&quot;http://servidor.com/archivo.js&quot;&gt;&lt;/script&gt;&lt;!-- Será sustituido por --&gt;&lt;script class=&quot;cookie&quot; type=&quot;text/plain&quot;&gt;<br> var file = document.createElement('script'); file.type = 'text/javascript'; file.async = true; file.src = &quot;http://servidor.com/archivo.js&quot;; document.getElementsByTagName('head')[0].appendChild(file); <br>&lt;/script&gt;<br></pre><br><br>Aunque si el proveedor te requería usar <code>script src</code> posiblemente no soporte la carga asíncrona.<br><h3 id="activandoeurocookiejs">Activando eurocookie-js</h3><br>Ahora solo nos falta activar eurocookie-js. Es fácil. Al final, antes de cerrar <code>body</code> tenemos que añadir lo siguiente:<br><h5 id="siusamosboweroelmtodomanual">Si usamos Bower o el método manual</h5><br><br><pre class="lang:default decode:true"><br><br>&lt;script&gt;<br> euroCookie(&quot;http://enlace-a-politica-de-privacidad.com&quot;); <br>&lt;/script&gt;<br></pre><br><br><h5 id="siusamosnpmbrowserify">Si usamos npm + browserify</h5><br><br><pre class="lang:js decode:true"> <br>var ec=require(&quot;eurocookie-js&quot;); <br>ec.euroCookie(&quot;http://link-to-privacy-policy.com&quot;); <br></pre><br><br>El fichero generado por browserify podrá ser añadido directamente al HTML.<br><h2 id="msinformacin">Más información</h2><br>Como siempre, toda la información está en GitHub: <a href="http://github.com/AdrianArroyoCalle/eurocookie-js">http://github.com/AdrianArroyoCalle/eurocookie-js</a>