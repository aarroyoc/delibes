Recientemente SciPy anunció que lanzaba la versión 1.0 tras 16 años en desarrollo. Con motivo de este acontecimiento voy a realizar una serie de tutoriales sobre estadística en Python. Quiero hacer especial énfasis en la resolución de problemas estadísticos, con problemas reales que vamos a ir resolviendo. Usaremos <a href="https://www.python.org/">Python 3</a>, <a href="http://www.numpy.org/">NumPy</a>, <a href="http://pandas.pydata.org/">Pandas</a>, <a href="https://www.scipy.org/">SciPy</a> y <a href="http://matplotlib.org/">Matplotlib</a> entre otras.<br><h2>¿Por qué Python para estadística?</h2><br>Python se ha convertido en uno de los lenguajes más usados en la comunidad de <em>data science</em>. Se trata de un lenguaje cómodo para los matemáticos, sobre el que es fácil iterar y cuenta con unas librerías muy maduras.<br><h2>Instalando el stack estadístico en Python</h2><br>Yo voy a usar Python 3. Tanto si estamos en Windows, macOS o Linux podemos instalar NumPy, SciPy, Pandas y Matplotlib con este simple comando<br><pre class="lang:default decode:true ">pip3 install numpy scipy matplotlib pandas --user</pre><br><h3>¿Para qué sirve cada cosa?</h3><br><strong>NumPy</strong> sirve para realizar cálculos numéricos con matrices de forma sencilla y eficiente y tanto SciPy como Pandas la usan de forma interna. NumPy es la base del stack científico de Python.<br><br><strong>SciPy</strong> es una colección de módulos dedicados a diversas áreas científicas. Nosotros usaremos principalmente el módulo <strong>stats</strong>.<br><br><strong>Pandas</strong> es una librería que permite manipular grandes conjuntos de datos en tablas con facilidad. Además permite importar y exportar esos datos.<br><br><strong>Matplotlib</strong> permite realizar gráficos y diagramas con facilidad, mostrarlos en pantalla o guardarlos a archivos.<br><h2>Estadística descriptiva</h2><br>Vamos a comenzar con la parte de la estadística que trata de darnos un resumen del conjunto de datos.<br><br>Para ello vamos a definir el concepto de <strong>variable estadística</strong> como la magnitud o cualidad de los individuos que queremos medir (estatura, calificaciones en el examen, dinero en la cuenta,...). Las variables pueden ser <strong>cualitativas</strong> o <strong>cuantitativas</strong> y dentro de las cuantitativas pueden ser <strong>continuas</strong> y <strong>discretas</strong>.<br><h3>Fichero de ejemplo</h3><br>En este post voy a usar este fichero para los ejemplos (guardalo como <strong>notas.csv</strong>).<br><pre class="lang:default decode:true" title="notas.csv">alumno,nota<br>Araceli,9<br>Manuel,5<br>Pablo,7<br>Íñigo,4<br>Mario,3<br>Raúl,4<br>Verónica,6<br>Darío,10<br>Laura,4<br>Silvia,6<br>Eduardo,2<br>Susana,8<br>María,5</pre><br><h2>Cargando datos</h2><br>Para cargar datos y manipular los datos usamos <strong>Pandas</strong>. Pandas permite cargar datos de distintos formatos: CSV, JSON, HTML, <a href="https://support.hdfgroup.org/HDF5/">HDF5</a>, SQL, <a href="https://msgpack.org/">msgpack</a>, Excel, ...<br><br>Para estos ejemplos usaremos CSV, valores separados por comas:<br><pre class="lang:python decode:true">import pandas as pd<br><br>df = pd.read_csv("notas.csv")</pre><br><strong>df</strong> es un objeto de tipo <strong>DataFrame</strong>. Es la base de Pandas y como veremos, se trata de un tipo de dato muy flexible y muy fácil de usar. Si ahora hacemos <strong>print</strong> a df obtenemos algo así:<br><br><a href="https://files.adrianistan.eu/PandasReadCSV.png"><img class="aligncenter size-full wp-image-1093" src="https://files.adrianistan.eu/PandasReadCSV.png" alt="" width="641" height="254" /></a><br><h2>Tabla de frecuencias</h2><br>Si tenemos una variable <strong>discreta</strong> o <strong>cualitativa</strong> una cosa habitual que se suele hacer es construir la tabla de frecuencias. Con ella sabemos cuantas veces se repite el valor de la variable. Para crear tablas de frecuencia usamos <strong>crosstab</strong>. En <strong>index</strong> indicamos la variable que queremos contar y en <strong>columns</strong> especificaos el nombre de la columna de salida. crosstab devuelve otro <strong>DataFrame</strong> independiente.<br><br><a href="https://files.adrianistan.eu/TablaFrecuencias.png"><img class="aligncenter size-full wp-image-1094" src="https://files.adrianistan.eu/TablaFrecuencias.png" alt="" width="126" height="132" /></a><br><br><em>Ejemplo: ¿Cuántos alumnos han sacado un 5 en el examen?</em><br><pre class="lang:python decode:true ">import pandas as pd<br><br># Leer datos<br>df = pd.read_csv("notas.csv")<br><br># Generar tabla de frecuencias<br>tab = pd.crosstab(index=df["nota"],columns="frecuencia")<br>print(tab)<br><br># Buscar el elemento 5 (el elemento que cumple la condición de que su índice es igual a 5)<br>fila = tab.loc[tab.index == 5]<br># Obtenemos el valor "frecuencia" de la fila<br>x = fila["frecuencia"]<br>x = int(x)<br>print("%d alumnos han sacado un 5" % x)<br></pre><br><em>Ejemplo: ¿Cuántos alumnos han aprobado (sacar 5 o más)?</em><br><pre class="lang:python decode:true ">import pandas as pd<br><br>df = pd.read_csv("notas.csv")<br><br>tab = pd.crosstab(index=df["nota"],columns="frecuencia")<br>print(tab)<br><br>x = tab.loc[tab.index &gt;= 5]["frecuencia"].sum()<br>x = int(x)<br>print("%d alumnos han aprobado el examen" % x)</pre><br>En estos ejemplo usamos <strong>loc</strong> para devolver las filas que cumplan la condición descrita entre corchetes. En el último ejemplo como el resultado son varias filas, nos quedamos con la parte de las frecuencias y sumamos todo, para así obtener el resultado final.<br><h2>Diagrama de sectores</h2><br>Una forma sencilla de visualizar datos que ya han sido pasados por la tabla de frecuencias es el <strong>diagrama de sectores</strong>. Usando <strong>Matplotlib</strong> podemos generar gráficos en los que podemos personalizar todo, pero cuyo uso básico es extremadamente simple.<br><pre class="lang:python decode:true ">import pandas as pd<br>import matplotlib.pyplot as plt<br><br>df = pd.read_csv("notas.csv")<br><br>tab = pd.crosstab(index=df["nota"],columns="frecuencia")<br><br>plt.pie(tab,labels=tab.index)<br>plt.xlabel("Notas del examen")<br>plt.savefig("notas.png")</pre><br><a href="https://files.adrianistan.eu/notas.png"><img class="wp-image-1095 size-full" src="https://files.adrianistan.eu/notas.png" alt="" width="640" height="480" /></a> Gráfica generada por Matplotlib<br><br><em>Ejemplo: Haz un diagrama de sectores donde se vea claramente el porcentaje de aprobados frente al de suspensos</em><br><pre class="lang:python decode:true ">import numpy as np<br>import pandas as pd<br>import matplotlib.pyplot as plt<br><br>df = pd.read_csv("notas.csv")<br><br>tab = pd.crosstab(index=df["nota"],columns="frecuencia")<br><br>aprobados = tab.loc[tab.index &gt;= 5]["frecuencia"].sum()<br>suspensos = tab.loc[tab.index &lt; 5]["frecuencia"].sum()<br><br>data = np.array([aprobados,suspensos])<br>plt.pie(data,labels=["Aprobados","Suspensos"],autopct="%1.1f%%")<br>plt.xlabel("Notas del examen")<br>plt.savefig("notas.png")</pre><br><a href="https://files.adrianistan.eu/notas-1.png"><img class="aligncenter size-full wp-image-1096" src="https://files.adrianistan.eu/notas-1.png" alt="" width="640" height="480" /></a>Destacar que aquí hemos usado <strong>np.array</strong> para crear un array de NumPy en vez de una lista nativa de Python.<br><h2>Diagrama de barras</h2><br>De forma similar es posible generar un diagrama de barras:<br><br><em>Ejemplo: Genere un diagrama de barras de las notas obtenidas por los alumnos en el examen</em><br><pre class="lang:python decode:true ">import pandas as pd<br>import matplotlib.pyplot as plt<br><br>df = pd.read_csv("notas.csv")<br><br>tab = pd.crosstab(index=df["nota"],columns="frecuencia")<br><br>plt.bar(tab.index,tab["frecuencia"])<br>plt.xlabel("Notas del examen")<br>plt.savefig("notas.png")</pre><br><a href="https://files.adrianistan.eu/DiagramaBarras.png"><img class="aligncenter size-full wp-image-1097" src="https://files.adrianistan.eu/DiagramaBarras.png" alt="" width="640" height="480" /></a><br><br><iframe width="300" height="150" style="width: 120px; height: 240px;" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="//rcm-eu.amazon-adsystem.com/e/cm?lt1=_blank&amp;bc1=000000&amp;IS2=1&amp;bg1=FFFFFF&amp;fc1=000000&amp;lc1=0000FF&amp;t=adrarrcal-21&amp;o=30&amp;p=8&amp;l=as4&amp;m=amazon&amp;f=ifr&amp;ref=as_ss_li_til&amp;asins=B075X4LT6K&amp;linkId=abf6e9ad3af7b28c31c5357525e2b08c"></iframe><br><br>&nbsp;<br><br>&nbsp;