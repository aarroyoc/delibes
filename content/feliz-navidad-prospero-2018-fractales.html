Feliz Navidad! Si estás leyendo esto, darte las gracias por seguir leyendo este blog. Me alegro mucho de tener cada vez más lectores y es algo que me anima a escribir más y más. En este especial navideño disfrutaremos de éxitos musicales de la navidad, veremos como hacer un fractal muy navideño en Rust y os pediré vuestra opinión.<br><br>Comenzamos con <strong>In Dulci Jubilo</strong> y este cover de <a class="yt-simple-endpoint style-scope yt-formatted-string" href="https://www.youtube.com/channel/UCaeIy5lvabL7naWxfRUn5RA">Giuliano Ferrace Leanza</a><br><br><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/qP4SoR5w7xQ" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen="allowfullscreen"></iframe><br><h2>El fractal de Koch</h2><br><a href="https://es.wikipedia.org/wiki/Helge_von_Koch">Helge von Koch</a> fue un matemático sueco que en 1904 publica un artículo sobre la que desde entonces se llamaría curva de Koch. Se trata de una curva, generada con unas reglas muy simples. La idea fundamental es que se parte de una recta, que se divide en tres trozos iguales. El trozo del medio se sustituye por un triángulo equilátero. Entonces la curva recorre el primer trozo, sube el triángulo, baja el triángulo y continúa recto.<br><br><a href="https://files.adrianistan.eu/621px-Von_koch_1_etape.svg_.png"><img class="aligncenter size-full wp-image-1211" src="https://files.adrianistan.eu/621px-Von_koch_1_etape.svg_.png" alt="" width="621" height="180" /></a>Si ahora en cada uno de los cuatro trozos rectos aplicamos la misma curva de Koch obtenemos esto:<br><br><a href="https://files.adrianistan.eu/621px-Von_koch_2_etapes.svg_.png"><img class="aligncenter size-full wp-image-1212" src="https://files.adrianistan.eu/621px-Von_koch_2_etapes.svg_.png" alt="" width="621" height="180" /></a>Según la terminología de Mandelbrot, este fractal es un teragón. Si ahora en vez de aplicar esto sobre una recta, lo hacemos sobre un triángulo equilátero con sus tres trozos rectos iguales, <strong>¿qué obtenemos?</strong><br><h2>Turtle, una librería de Rust para gráficos tortuga</h2><br>Quizá entre mis lectores haya alguno que aprendió a programar con <strong>LOGO</strong>. Una de las características de LOGO era que disponía de una tortuga con la que íbamos dibujando según nos movíamos. Esta manera de dibujar, no es óptima en rendimiento puro, pero es ideal para fractales y para <strong>enseñar a programar</strong>. Python incorpora en su librería estándar el módulo <strong>turtle</strong> y en Rust está a punto de salir una librería que soporta una API similar llamada <strong><a href="http://turtle.rs/">turtle</a>.</strong><br><br>Lo primero que tenemos que hacer es definir la curva de Koch con <strong>turtle</strong>.<br><pre class="lang:rust decode:true ">    fn koch(&amp;mut self, length: f64){<br>        self.forward(length/3.0);<br>        self.left(60.0);<br>        self.forward(length/3.0);<br>        self.right(120.0);<br>        self.forward(length/3.0);<br>        self.left(60.0);<br>        self.forward(length/3.0);<br>    }</pre><br>Con esto nos valdría, pero <em>no es recursivo</em>. Necesitamos poder aplicar la curva de Koch en nuestras rectas (donde hacemos <em>forward</em>) de forma recursiva. Pero si lo hacemos recursivo de forma infinita no acabará nunca, es por ello que tenemos que indicar cuantos niveles de recursividad queremos.<br><pre class="lang:rust decode:true ">    fn op(&amp;mut self, length: f64, level: u32) {<br>        if level == 0{<br>            self.forward(length);<br>        }else{<br>            self.koch(length,level);<br>        }<br>    }<br>    fn koch(&amp;mut self, length: f64, level: u32){<br>        self.op(length/3.0,level-1);<br>        self.left(60.0);<br>        self.op(length/3.0,level-1);<br>        self.right(120.0);<br>        self.op(length/3.0,level-1);<br>        self.left(60.0);<br>        self.op(length/3.0,level-1);<br>    }</pre><br>Esto ya tiene más sentido. Ahora juntemos todo lo necesario:<br><pre class="lang:rust decode:true " title="main.rs">extern crate turtle;<br><br>use turtle::Turtle;<br>use turtle::Distance;<br><br>trait Fractal{<br>    fn koch(&amp;mut self, length: f64, level: u32);<br>    fn op(&amp;mut self, length: f64, level: u32) {<br>        if level == 0{<br>            self.forward(length);<br>        }else{<br>            self.koch(length,level);<br>        }<br>    }<br>    fn forward(&amp;mut self, distance: Distance);<br>}<br><br>impl Fractal for Turtle{<br>    fn koch(&amp;mut self, length: f64, level: u32){<br>        self.op(length/3.0,level-1);<br>        self.left(60.0);<br>        self.op(length/3.0,level-1);<br>        self.right(120.0);<br>        self.op(length/3.0,level-1);<br>        self.left(60.0);<br>        self.op(length/3.0,level-1);<br>    }<br>    fn forward(&amp;mut self, distance: Distance){<br>        self.forward(distance);<br>    }<br>}<br><br>fn main() {<br>    let mut turtle = Turtle::new ();<br>    turtle.set_pen_size(2.0);<br>    turtle.pen_up();<br>    turtle.go_to([-200.0,100.0]);<br>    turtle.pen_down();<br>    turtle.set_speed(0);<br>    turtle.hide();<br>    turtle.right(90.0);<br>    turtle.koch(400.0,5);<br>    turtle.right(120.0);<br>    turtle.koch(400.0,5);<br>    turtle.right(120.0);<br>    turtle.koch(400.0,5);<br>}</pre><br>Si compilamos y ejecutamos esto con Cargo:<br><br><a href="https://files.adrianistan.eu/CopoFractalKoch.png"><img class="aligncenter size-large wp-image-1213" src="https://files.adrianistan.eu/CopoFractalKoch-1024x576.png" alt="" width="840" height="473" /></a>Y aquí tenemos al <strong>copo de nieve de Koch</strong>.<br><br>Tenéis el proyecto completo en GitHub: <a href="https://github.com/aarroyoc/fractal_koch_rust">https://github.com/aarroyoc/fractal_koch_rust</a><br><h2>Fractal (bis)</h2><br>Otro fractal muy interesante que programé mientras estaba haciendo el copo de nieve fue este otro. Desconozco si tiene nombre. Es algo más complejo de implementar y lo de los colores me dio bastantes dolores de cabeza hasta que encontré una progresión bella.<br><br><a href="https://files.adrianistan.eu/Fractal2-Mejor.png"><img class="aligncenter size-full wp-image-1216" src="https://files.adrianistan.eu/Fractal2-Mejor.png" alt="" width="978" height="680" /></a>Su código es (en este caso Python):<br><pre class="lang:python decode:true " title="fractal.py">from turtle import *<br>from math import cos, pi<br><br>a = 0<br><br>def fractal(length=100,level=1,flip=False):<br>    # 3906 llamadas a fractal = 5^5 + 5^4 + 5^3 + 5^2 + 5^1 + 5^0<br>    ((r,g,b),_) = color()<br>    global a<br>    a += 1<br>    if a % 7 == 0 and a &lt; 1953:<br>        b += 1<br>    if a % 7 == 0 and a &gt; 1953:<br>        r += 1<br>        b -= 1<br><br>    r = min(r,255)<br>    g = max(g,0)<br>    b = min(b,255)<br>    b = max(b,0)<br><br>    color(int(r),int(g),int(b))<br><br>    if not flip:<br>        left(90)<br>    else:<br>        right(90)<br>    if level == 1:<br>        forward(length)<br>    else:<br>        fractal(length*length/(2*cos(45)*length/2+length),level-1,flip)<br>    if not flip:<br>        right(45)<br>    else:<br>        left(45)<br>    if level == 1:<br>        forward(length/2)<br>    else:<br>        fractal(length*length/(4*cos(45)*length/2+length),level-1,not flip)<br>    if not flip:<br>        right(45)<br>    else:<br>        left(45)<br>    if level == 1:<br>        forward(length)<br>    else:<br>        fractal(length*length/(2*cos(45)*length/2+length),level-1,flip)<br>    if not flip:<br>        right(45)<br>    else:<br>        left(45)<br>    if level == 1:<br>        forward(length/2)<br>    else:<br>        fractal(length*length/(4*cos(45)*length/2+length),level-1,not flip)<br>    if not flip:<br>        right(45)<br>    else:<br>        left(45)<br>    if level == 1:<br>        forward(length)<br>    else:<br>        fractal(length*length/(2*cos(45)*length/2+length),level-1,flip)<br>    if not flip:<br>        left(90)<br>    else:<br>        right(90)<br><br>def main():<br>    colormode(255)<br>    penup()<br>    pensize(2.0)<br>    setx(-100)<br>    sety(-200)<br>    pendown()<br>    color(0,255,0)<br>    speed(0)<br>    tracer(False)<br>    fractal(50,6)<br>    done()<br><br><br>main()</pre><br>&nbsp;<br><br><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/8CCf7gvmDEU" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen="allowfullscreen"></iframe><br><h2>Vuestra opinión</h2><br>Ahora os pido que me déis vuestra opinión sobre el blog. Usad los comentarios de debajo y contadme: ¿Cuál es el mayor problema del blog?, ¿crees que los contenidos salen con frecuencia suficiente y necesaria?, ¿los temas son interesantes?, ¿me voy mucho por las ramas?, ... Todo esto lo tendré en cuenta de cara al año que viene.<br><br>Aprovecho para recordar que podéis <a href="http://eepurl.com/b6NLlL">suscribiros a la lista de correo</a> para que os llegue un nuevo correo con cada post, podeís <a href="https://blog.adrianistan.eu/feed/">suscribiros al blog por RSS</a>, hay un <a href="https://t.me/adrianistan">canal de Telegram</a> y una <a href="https://www.facebook.com/Blog-Adrianist%C3%A1n-211912669250354/">página en Facebook</a>. En <a href="http://twitter.com/aarroyoca">Twitter</a>, <a href="http://gnusocial.cc/aarroyoc">GNU Social</a> e <a href="http://instagram.com/aarroyoca">Instagram</a> solo tengo perfiles personales, pero si os interesa, allí estoy. Por último en <a href="https://plus.google.com/+Adri%C3%A1nArroyoCalle">Google+</a> todavía sigo mandando los artículos.<br><br>Si os parece que me merezco una caña, siempre puedes donar usando PayPal, criptodivisas, tu apartamento en Comillas, ...<br><br>Sin más, feliz próspero año 2018<br><br><iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/1c6sWcsG4BE" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen="allowfullscreen"></iframe><br><br>&nbsp;