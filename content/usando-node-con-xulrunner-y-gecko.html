Las aplicaciones basadas en <a href="https://es.wikipedia.org/wiki/HTML5">HTML5</a> para el escritorio han ido en aumento. Soluciones como node-webkit, recientemente renombrado a <a href="http://nwjs.io/">NW.js</a>, han crecido en popularidad. Juegos como <a href="http://www.greenheartgames.com/app/game-dev-tycoon/">Game Dev Tycoon</a> o aplicaciones como <a href="http://atraci.github.io/Atraci-website/">Atraci</a> o <a href="https://popcorntime.io/">Popcorn Time</a> son solo unos ejemplos de apliaciones que usan node-webkit. Sin embargo las personas que preferimos tecnología de Mozilla nos encontrabas con que no había nada que sirviese.<br><h2><a href="http://github.com/AdrianArroyoCalle/node-xulrunner">node-xulrunner</a></h2><br>Así que tenía que hacer algo. De momento es más que nada una prueba de concepto sin nada reseñable y con miles de bugs potenciales. Lo he diseñado para ser llamado desde una API de CommonJS. Esto permitirá tener un cliente de línea de comandos de manera sencilla, pero de momento no lo voy a hacer. Os enseñaré a usarlo con otro método<br><h2>Nuestra aplicación HTML5, Node.js, XULRunner</h2><br>El primer paso será clonar el proyecto node-xulrunner de GitHub.<br><br><br><pre class="lang:default decode:true"><br><br>git clone http://github.com/AdrianArroyoCalle/node-xulrunner html5-app<br>cd html5-app<br>npm install<br><br></pre><br><br><br>La estructura del proyecto ya es una aplicación empaquetable, de manera que solo tendremos que modificar ciertos ficheros. Necesitaremos editar el archivo <em>test.js</em> para indicar ciertas preferencias sobre la aplicación. Algunos parámetros interesantes son <em>os</em> que puede ser: win32, mac, linux-i686 o linux-x86_64 y <em>version</em> que debe coincidir con una versión de XUL Runner disponible y publicada. El resto de opciones son autoexplicativas cuando las veais. En mi caso <em>test.js</em> queda así:<br><br><br><pre class="lang:js decode:true"><br><br>var xul=require(&quot;./index.js&quot;);<br><br>var options={<br>os: &quot;linux-i686&quot;,<br>version: &quot;35.0.1&quot;,<br>name: &quot;HTML5 App&quot;,<br>vendor: &quot;Adrián Arroyo&quot;,<br>appVersion: &quot;0.1.0&quot;,<br>buildId: &quot;00000001&quot;,<br>id: &quot;test@node-xulrunner&quot;,<br>copyright: &quot;2015 Adrián Arroyo Calle&quot;,<br>width: 800,<br>height: 800<br>};<br><br>xul.packageApp(options);<br><br></pre><br><br><br>Ahora debemos crear nuestra aplicación propiamente dicha. Se encuentra bajo el directorio app/ y concretamente el fichero <em>main.js</em> será el ejecutado nada más arrancar la aplicación. <em>main.js</em> puede usar todas las APIs de Node. De hecho si usamos npm en esa carpeta funcionaría correctamente. En mi caso:<br><br><br><pre class="lang:js decode:true"><br><br>var http = require('http');<br>http.createServer(function (req, res) {<br>res.writeHead(200, {'Content-Type': 'text/plain'});<br>res.end('Hello World\n');<br>}).listen(4200, '127.0.0.1');<br>console.log('Server running at http://127.0.0.1:4200/');<br><br></pre><br><br><br>Y ahora los pasos mágicos. Vamos a la terminal y ejecutamos test.js con Node.<br><br><br><pre class="lang:default decode:true"><br><br>node test.js<br><br></pre><br><br><br>Nos saldrá una advertencia y empezará a descargar XULRunner y Node.js. Este ejecución no creará ninguna aplicación. Para, ahora sí, crear la aplicación debemos llamar otra vez a test.js<br><br><br><pre class="lang:default decode:true"><br><br>node test.js<br><br></pre><br><br><br>Y en la carpeta build/ tendremos la aplicación lista para ser probada. Simplemente tendremos que ejecutar <em>app</em><br><br><img class="alignnone size-large wp-image-52" src="https://files.adrianistan.eu/HTML5App-XULRunner-1024x578.png" alt="HTML5App-XULRunner" width="840" height="474" />